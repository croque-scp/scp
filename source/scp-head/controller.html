<!DOCTYPE html>
<html>
  <head>
    <script src="https://notifier.rossjrw.com/assets/createResizeIframe.js"></script>
    <script>
      window.isController = true;

      // Each flag is assigned a 2-digit number which cannot start with 0 or 1 (i.e. 20 is added to its index, max index is 79).
      // True is 1 and false is 0.
      // The following is concatenated onto the output:
      // "1" + flag number + bool number
      // E.g. 1201121012211230 = true, false, true, false

      // TODO List of assertions/contradictions and their values should be listed
      // TODO Compile these into an autogenerated minimal list of flags to be communicated?

      const flags = [
        {
          name: "test",
          value: false,
        },
      ];

      function communicateFlags() {
        let message = "";
        for (const [index, flag] of flags.entries()) {
          message += "1" + String(index + 20) + String(Number(flag.value));
        }
        message += "px";
        document.body.style.height = message;
      }

      addEventListener("message", (message) => {
        if (message.origin !== "https://scp-sandbox-3.wdfiles.com") return;
        const flag = flags.find((flag) => flag.name === message.data.flag);
        if (flag) {
          flag.value = message.data.value;
          communicateFlags();
        }
      });
    </script>
  </head>

  <body></body>
</html>
